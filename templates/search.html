<!-- @format -->

{% extends "layout.html" %} 

{% block main %} 

{% if current_user_name %}
<h3>username:</h3>
{{current_user_name["username"]}} 
{% endif %}


{% if normal_search %} 

<div class="search-container float-bg-dark width-100"> <!-- search container  -->
  <form action="/search" method="POST"> 
  <div class = "search-header normal-flex-horizontal align-center wrap border-red ">
    
        <div class="search-catagory  normal-flex-veritcal align-center  width-auto border-green">
        
          <div>
            <select id="multiSelect" name="search-catagory-id" id="">
              {% for cat_info in catagories %}
              <option value='{{ cat_info["catagory_id"]}}'>
                {{ cat_info["catagory_name"]}}
              </option>
              {% endfor %}
            </select>
          </div>

          <div >
            <button name="search-button" type="submit" class="my-button-1 self-align-center"
              formaction="/search">
              search
            </button>
          </div>
        </div>  <!-- end of search catagory section-->

      
      <div class="border-black">
        <div class="search-date border-blue width-auto normal-flex-horizontal wrap">
          <!-- <form action="/seachdate"> -->
            <div class = "normal-flex-vertical wrap">
              <input type="date" name="start-date" class = "border-green">
              <!-- <label for="date-upto">upto</label> -->
            <div>
              <input name="date-upto-check-box" type="checkbox" value="upto"> Upto 
            </div>
            <div>
            <input type="date" name="end-date">
          </div>
            <button type = "submit" class = "my-button-1 cyan-box-shadow self-align-center"  formaction="/simpledate">Search</button>
          </div>
          
        </div>
        <div class="padding-s float-bg-light-s">
          <!-- <select id ="mulitpleSelect" multiple name="native-select" placeholder="Native Select" data-search="True" data-silent-initial-value-set="true"> -->
            <select  name="catagory-type" class="padding-s margin-bottom-s" placeholder="Select Catagory Type" onchange = 'document.getElementById("generate_catagory").click()' onload = 'document.getElementById("generate_catagory").click()'>
              
              {% for type in catagory_types %}
                
                <option value="{{type['catagory_type_id']}}"> {{ type["catagory_type_name"] }} </option>
                
              {% endfor %}
            
            </select>
          </div>
          <div class=" width-100 margin-s float-bg-light-s">
            <select id ="mulitpleSelect" class="mulitple-select  custom-width-400" multiple name="native-select" placeholder="Select SUB Catagories" data-search="True" data-silent-initial-value-set="true">            
              {% for catagory in catagories %}
                  {% if catagory["catagory_name"]%}
                      <option value= '{{catagory["catagory_id"] }}' >{{catagory["catagory_name"]}}</option>
                  {% endif %}
              {% endfor %}
            </select>
          
          </div>
        
      </div>

      
  </div> <!-- end of search-catagory division-->

  
  </div> <!-- end of search-header-->
</form>

  <!-- RESULT PART RESULT CONTAINER  -->
  <div class="search-result border-blue width-100">
    from date {{start_date }}  --- up to --- {{ end_date }}
    {% if results %} 
    <div class="align-left border-red">
      {% for result in results %}
          
          <div class="float-bg-light cyan-box-shadow padding-s">
            {{result["diary_id"]}}--{{result["given_date"]}}--{{result["diary_content"]}}
          </div>
          
          
          
      {% endfor %} 
    </div>  
    
      
    {% else %}
      <h3> DIsplay all user diaries here search your diary</h3>
    </div>

    {% endif %} 
  
  {% endif %}

</div><!-- end of container div -->
{% endblock %}
